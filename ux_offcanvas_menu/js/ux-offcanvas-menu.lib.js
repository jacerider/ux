!function(t,e,i){"use strict";var n;return n={animate:"TweenLite",speed:.6,trailType:"breadcrumb",selector:{trail:".ux-offcanvas-menu-trail",menu:".ux-offcanvas-menu",links:".children > a"}},t.ux_offcanvas_menu=function(i,a){this.debug=!1,this.initialized=!1,this.visible=!1,this._defaults=n,this.settings=t.extend(!0,{},this._defaults,a),this.element=t(i),this.offcanvas=t(i).closest(".ux-offcanvas-item"),this.menu=t(this.settings.selector.menu,i).addClass("animation-type-"+this.settings.animation),this.trail=t(this.settings.selector.trail,i).addClass("trail-type-"+this.settings.trail),this.links=t(this.settings.selector.links,i),this.trail_links=[],this.initialize=function(e){return function(){e.set_animator(),e.offcanvas.on("ux_offcanvas_item.open",function(){e.initialized||(e.bind_links(),e.show_level(),e.initial_level=e.level_get(),e.initial_trail=t(e.menu).find(".active-trail")),e.visible=!0,e.initialized=!0}),e.offcanvas.on("ux_offcanvas_item.close",function(){e.level_revert(),e.visible=!1}),e.log("UX Offcanvas Menu has been initialized.")}}(this),this.level_get=function(t){return function(){var e=t.menu.attr("data-depth");return e>0?e:0}}(this),this.level_set=function(t){return function(e){e=e>0?e:0,t.menu.attr("data-depth",e)}}(this),this.level_revert=function(t){return function(){var e=t.initial_level,i=t.menu.width()*e;setTimeout(function(){t.animate.to(t.menu,0,{x:i*-1}),t.initial_trail.addClass("active-trail"),t.show_level(e)},t.settings.speed)}}(this),this.show_level=function(e){return function(i){i=i||e.level_get();var n=e.menu.width()*i,a=e.visible?e.settings.speed:.1;e.element.find(".current").removeClass("current");var l=function(){t('ul[data-level="'+i+'"] .active-trail',e.menu).removeClass("active-trail"),0===parseInt(i)?e.menu.addClass("current"):e.menu.find(".active-trail").last().addClass("current")};e.level_set(i),e.trail_build(i),"fade"===this.settings.animation?e.animate.fromTo(e.menu,a/2,{opacity:1},{opacity:0}).eventCallback("onComplete",function(){e.animate.to(e.menu,0,{x:n*-1}),e.animate.fromTo(e.menu,a/2,{opacity:0},{opacity:1}),l()}):e.animate.to(e.menu,a,{x:n*-1}).eventCallback("onComplete",l)}}(this),this.trail_build=function(e){return function(i){var n,a,l=[];i=i||e.level_get();var s=function(i){i.preventDefault(),e.show_level(t(this).attr("data-level"))};if("back"===e.settings.trail)e.trail.html(""),a=t("<a>Back</a>"),i>0?(a.attr("data-level",i-1),a.on("click",s),e.visible&&0===e.trail_links.length&&e.animate.fromTo(a,e.settings.speed,{opacity:0},{opacity:1,clearProps:"All"}),l.push(1)):0===e.trail_links.length?a.css({opacity:0}):e.animate.to(a,e.settings.speed,{opacity:0}),a.appendTo(e.trail);else{l.push(t('<a data-level="0">All</a>'));var o,r=t(".active-trail"+this.settings.selector.links,e.menu);for(n=0;n<i;n++)e.trail_links[n+1]?l.push(e.trail_links[n+1]):(o=r.eq(n),l.push(t('<a data-level="'+(n+1)+'">'+t(o).text()+"</a>")));var c=function(e){t(e).remove()};if(l.length>e.trail_links.length)for(n=e.trail_links.length;n<l.length;n++)a=l[n],a.appendTo(e.trail).on("click",s),e.visible&&e.animate.fromTo(a,e.settings.speed,{opacity:0},{opacity:1,clearProps:"All"});else if(l.length<e.trail_links.length)for(n=l.length;n<e.trail_links.length;n++)a=e.trail_links[n],e.visible?e.animate.to(a,e.settings.speed,{opacity:0}).eventCallback("onComplete",c,a):a.remove()}e.trail_links=l}}(this),this.bind_links=function(i){return function(){var n=e.location.pathname;i.menu.find("a").each(function(){var e=t(this).attr("href");if(!i.level_get()&&e===n){t(this).parents(".children").addClass("active-trail");var a=t(this).siblings("[data-level]").attr("data-level");a||(a=t(this).closest("[data-level]").attr("data-level")),a&&i.level_set(a)}if(e){var l=t(this).siblings("[data-level]");l.length&&t(this).clone().prependTo(l).wrap('<li class="parent"></li>')}}),i.links.on("click",function(e){var n=t(this).siblings("[data-level]");if(n.length){i.log("Child Found:",n),e.preventDefault();var a=n.attr("data-level");t(this).parent().addClass("active-trail"),i.show_level(a)}else i.log("No Child Found")})}}(this),this.set_animator=function(t){return function(){t.animate=e[t.settings.animate],t.log("Animating using the "+t.settings.animate+" platform.")}}(this),this.log=function(t){return function(e,i){t.debug&&("object"==typeof e?console.log("[UX Offcanvas Menu]",e):i?console.log("[UX Offcanvas Menu] "+e,i):console.log("[UX Offcanvas Menu] "+e))}}(this),this.error=function(t){return function(t){"object"==typeof t?console.error("[UX Parallax]",t):console.error("[UX Parallax] "+t)}}(this),this.initialize()},t.fn.ux_offcanvas_menu=function(e){return this.each(function(i,n){if(!t.data(n,"ux_offcanvas"))return t.data(n,"ux_offcanvas_menu",new t.ux_offcanvas_menu(n,e))})},t.fn.ux_offcanvas_menu}(jQuery,window,document);