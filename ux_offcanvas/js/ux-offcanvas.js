!function(t,e,n,s){"use strict";function o(e,n){this.settings=n,this.$window=t(window),this.$document=t(document),this.$offcanvas=e,this.$trigger=t("#ux-offcanvas-trigger-"+n.id),this.setup()}t.extend(o,{$body:t("body"),$wrapper:t("#ux-offcanvas"),instances:{},currentId:null,getInstance:function(t){var e=this;return e.instances[t]},open:function(t){var n=this,s=n.currentId,o=n.getInstance(t);s&&n.close(),s!==t&&(n.currentId=t,n.$body.addClass("ux-offcanvas-active ux-offcanvas-"+o.getPosition()),o.open(),e.Ux.blurContent(),e.Ux.showShadow(function(t){n.close()}))},close:function(t){var n=this;t=t||n.currentId;var s=n.getInstance(t);n.currentId=null,n.$body.removeClass("ux-offcanvas-active ux-offcanvas-"+s.getPosition()),s.close(),n.stopBodyScrolling(!1),e.Ux.focusContent(),e.Ux.hideShadow()},stopBodyScrolling:function(t){var e=this;if(t===!0){var n=function(t){t.preventDefault()};e.$body.on("touchmove.ux-offcanvas",n)}else e.$body.off("touchmove.ux-offcanvas")}}),t.extend(o.prototype,{_defaults:{position:"left",size:320},isActive:!1,setup:function(){var e=this;switch(e.settings=t.extend(!0,{},e._defaults,e.settings),e.settings.position){case"left":case"right":e.$offcanvas.width(e.settings.size);break;default:e.$offcanvas.height(e.settings.size)}e.$trigger.length&&e.$trigger.on("click.ux-offcanvas",function(t){t.preventDefault(),o.open(e.getId())}),e.$offcanvas.find(".ux-offcanvas-close").on("click.ux-offcanvas",function(t){t.preventDefault(),o.close(e.getId())})},getId:function(){var t=this;return t.settings.id},getPosition:function(){var t=this;return t.settings.position},getSize:function(){var t=this;return t.settings.size},open:function(){var t=this;t.isActive=!0,t.$offcanvas.addClass("active").css(t.getOffset()),t.$offcanvas.trigger("ux_offcanvas_item.open"),t.$trigger.addClass("active"),t.$document.on("keyup.ux-offcanvas",function(e){27===e.keyCode&&(e.preventDefault(),o.close(t.getId()))})},close:function(t,e){var n=this;n.isActive=!1,n.$offcanvas.removeClass("active"),n.$offcanvas.trigger("ux_offcanvas_item.close"),n.$trigger.removeClass("active"),n.$document.off("keyup.ux-offcanvas")},getOffset:function(){var t=this,e=t.settings.position,n={left:"right",right:"left",top:"bottom",bottom:"top"},o=jQuery.extend({},s.offsets);switch(e){case"top":case"bottom":o.maxHeight=t.$window.height()-o.top-o.bottom}return delete o[n[e]],o}}),e.behaviors.uxOffcanvas={attach:function(e,n){if(n.ux&&n.ux.offcanvas&&n.ux.offcanvas.items){var s,a=t("#ux-offcanvas").once("ux-offcanvas");if(a.length)for(var i in n.ux.offcanvas.items)n.ux.offcanvas.items[i]&&(s=t("#ux-offcanvas-"+i,e),s.length&&(o.instances[i]=new o(s,n.ux.offcanvas.items[i])))}}},e.UxOffcanvas=o}(jQuery,Drupal,drupalSettings,Drupal.displace);