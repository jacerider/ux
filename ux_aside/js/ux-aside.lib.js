"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(e),e}:i(jQuery)}(function(d){var u=d(window),h=d(document),c="uxAside",l=c.toLowerCase(),s="closing",m="closed",p="opening",f="opened",e="destroyed";function g(t){return-1<(t=t||navigator.userAgent).indexOf("MSIE ")||-1<t.indexOf("Trident/")}function v(t){return parseInt(String(t).split(/%|px|em|cm|vh|vw/)[0])}function $(t,e){this.init(t,e)}var y=function(){var t,e=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}(),b=!!/Mobi/.test(navigator.userAgent),x=0;return $.prototype={constructor:$,init:function(t,o){var s=this;this.$element=d(t),void 0!==this.$element[0].id&&""!==this.$element[0].id?this.id=this.$element[0].id:(this.id=c+Math.floor(1e7*Math.random()+1),this.$element.attr("id",this.id)),this.classes=void 0!==this.$element.attr("class")?this.$element.attr("class"):"",this.content=this.$element.html(),this.wrapper=this.$element.parent(),this.state=m,this.options=o,this.width=0,this.timer=null,this.timerTimeout=null,this.progressBar=null,this.isPaused=!1,this.isFullscreen=!1,this.headerHeight=0,this.modalHeight=0,this.iframeLoad=0,this.iframeSizing=!1,this.hasScroll=null,this.$overlay=d('<div class="'+c+'-overlay" style="background-color:'+o.overlayColor+'"></div>'),this.$navigate=d('<div class="'+c+'-navigate"><div class="'+c+'-navigate-caption">Use</div><button class="'+c+'-navigate-prev"></button><button class="'+c+'-navigate-next"></button></div>'),this.group={name:this.$element.attr("data-"+l+"-group"),index:null,ids:[]},this.$element.attr("aria-hidden","true"),this.$element.attr("aria-labelledby",this.id),this.$element.attr("role","dialog"),this.$element.hasClass("uxAside")||this.$element.addClass("uxAside"),void 0===this.group.name&&""!==o.group&&(this.group.name=o.group,this.$element.attr("data-"+l+"-group",o.group)),!0===this.options.loop&&this.$element.attr("data-"+l+"-loop",!0),d.each(this.options,function(t,e){var i=s.$element.attr("data-"+l+"-"+t);try{"undefined"!==_typeof(i)&&(o[t]=""===i||"true"==i||"false"!=i&&("function"==typeof e?new Function(i):i))}catch(t){}}),!1!==o.appendTo&&this.$element.appendTo(o.appendTo),!0===o.iframe?(this.$element.html('<div class="'+c+'-wrap"><div class="'+c+'-content"><iframe class="'+c+'-iframe"></iframe>'+this.content+"</div></div>"),null!==o.iframeURL&&!0===o.iframeAutosize&&(this.iframeIsVimeo=-1!==o.iframeURL.indexOf("https://player.vimeo.com"),this.iframeIsYoutube=-1!==o.iframeURL.indexOf("https://www.youtube.com"),this.iframeIsVimeo||this.iframeIsYoutube)&&(o.width=o.iframeHeight="100px"),null!==o.iframeHeight&&this.$element.find("."+c+"-iframe").css("height",o.iframeHeight)):this.$element.html('<div class="'+c+'-wrap"><div class="'+c+'-content">'+this.content+"</div></div>"),this.$wrap=this.$element.find("."+c+"-wrap"),null===o.zindex||isNaN(parseInt(o.zindex))||(this.$element.css("z-index",o.zindex),this.$navigate.css("z-index",o.zindex-1),this.$overlay.css("z-index",o.zindex-2)),""!==o.radius&&this.$element.css("border-radius",o.radius),""!==o.padding&&this.$element.find("."+c+"-content").css("padding",o.padding),""!==o.theme&&this.$element.addClass(c+"--theme-"+o.theme),!0===o.rtl&&this.$element.addClass(c+"-rtl"),!0===o.openFullscreen&&(this.isFullscreen=!0,this.$element.addClass("isFullscreen")),!0===o.openTall&&(this.isTall=!0,this.$element.addClass("isTall")),this.createHeader(),this.recalcWidth(),this.recalcVerticalPos(),this.recalcHorizontalPos()},createHeader:function(){this.$header=d('<div class="'+c+'-header"><h2 class="'+c+'-header-title">'+this.options.title+'</h2><div class="'+c+'-header-subtitle">'+this.options.subtitle+'</div><div class="'+c+'-header-buttons"></div></div>'),!0===this.options.closeButton&&this.$header.find("."+c+"-header-buttons").append('<a href="javascript:void(0)" class="'+c+"-button "+c+'-button-close" data-'+l+"-close></a>"),!0===this.options.fullscreen&&this.$header.find("."+c+"-header-buttons").append('<a href="javascript:void(0)" class="'+c+"-button "+c+'-button-fullscreen" data-'+l+"-fullscreen></a>"),""!==this.options.buttons&&this.$header.find("."+c+"-header-buttons").append(this.options.buttons),!0!==this.options.timeoutProgressbar||isNaN(parseInt(this.options.timeout))||!1===this.options.timeout||0===this.options.timeout||this.$header.prepend('<div class="'+c+'-progressbar"><div style="background-color:'+this.options.timeoutProgressbarColor+'"></div></div>'),""===this.options.title&&this.$header.addClass(c+"-noTitle"),""===this.options.subtitle&&this.$header.addClass(c+"-noSubtitle"),(""!==this.options.title||!0===this.options.closeButton||this.options.fullscreen||this.options.timeoutProgressbar)&&(null===this.options.icon&&null===this.options.iconText||(this.$header.prepend('<i class="'+c+'-header-icon"></i>'),null!==this.options.icon&&this.$header.find("."+c+"-header-icon").addClass(this.options.icon).css("color",this.options.iconColor),null!==this.options.iconText&&this.$header.find("."+c+"-header-icon").html(this.options.iconText)),null!==this.options.headerColor&&(!0===this.options.borderBottom&&this.$element.css("border-bottom","3px solid "+this.options.headerColor),this.$header.css("background",this.options.headerColor)),this.$element.css("overflow","hidden").prepend(this.$header))},setGroup:function(t){var i,o=this,e=this.group.name||t;this.group.ids=[],void 0!==t&&t!==this.group.name&&(this.group.name=e=t,this.$element.attr("data-"+l+"-group",e)),void 0!==e&&""!==e&&(i=0,d.each(d("."+c+"[data-"+l+"-group="+e+"]"),function(t,e){o.group.ids.push(d(this)[0].id),o.id==d(this)[0].id&&(o.group.index=i),i++}))},toggle:function(){this.state==f&&this.close(),this.state==m&&this.open()},open:function(t){var e,i,o,s,n=this;function a(){n.state=f,n.$element.trigger(f),n.options.onOpened&&"function"==typeof n.options.onOpened&&n.options.onOpened(n)}if(this.state==m){if(n.$element.off("mousedown","[data-"+l+"-close]").on("mousedown","[data-"+l+"-close]",function(t){t.preventDefault();t=d(t.currentTarget).attr("data-"+l+"-transitionOut");void 0!==t?n.close({transition:t}):n.close()}),n.$element.off("mousedown","[data-"+l+"-fullscreen]").on("mousedown","[data-"+l+"-fullscreen]",function(t){t.preventDefault(),!0===n.isFullscreen?(n.isFullscreen=!1,n.$element.removeClass("isFullscreen")):(n.isFullscreen=!0,n.$element.addClass("isFullscreen")),n.options.onFullscreen&&"function"==typeof n.options.onFullscreen&&n.options.onFullscreen(n),n.$element.trigger("fullscreen",n)}),n.$navigate.off("click","."+c+"-navigate-next").on("click","."+c+"-navigate-next",function(t){n.next(t)}),n.$element.off("click","[data-"+l+"-next]").on("click","[data-"+l+"-next]",function(t){n.next(t)}),n.$navigate.off("click","."+c+"-navigate-prev").on("click","."+c+"-navigate-prev",function(t){n.prev(t)}),n.$element.off("click","[data-"+l+"-prev]").on("click","[data-"+l+"-prev]",function(t){n.prev(t)}),this.setGroup(),this.state=p,this.$element.trigger(p),this.$element.attr("aria-hidden","false"),!1===this.options.contentTransition&&n.$element.addClass(c+"-no-transition"),!0===this.options.iframe){this.startLoading(),!0!==this.options.iframeAutosize&&this.$element.find("."+c+"-iframe").on("load",function(){n.stopLoading()});var r=null;try{r=""!==d(t.currentTarget).attr("href")?d(t.currentTarget).attr("href"):null}catch(t){}if(null==(r=null!==this.options.iframeURL&&null==r?this.options.iframeURL:r))throw new Error("Failed to find iframe URL");this.iframeIsLocal=(i=r,o=window.location,(s=document.createElement("a")).href=i,s.hostname==o.hostname&&s.port==o.port&&s.protocol==o.protocol),this.$element.find("."+c+"-iframe").attr("src",r)}(this.options.bodyOverflow||b)&&(d("html").addClass(c+"-isOverflow"),b)&&d("body").css("overflow","hidden"),this.options.onOpening&&"function"==typeof this.options.onOpening&&this.options.onOpening(this),1<n.group.ids.length&&(n.$navigate.appendTo("body"),n.$navigate.addClass(n.options.transitionInOverlay),!0===n.options.navigateCaption&&n.$navigate.find("."+c+"-navigate-caption").show(),i=n.$element.outerWidth(),!1!==n.options.navigateArrows?("closeScreenEdge"===n.options.navigateArrows?(n.$navigate.find("."+c+"-navigate-prev").css("left",0).show(),n.$navigate.find("."+c+"-navigate-next").css("right",0)):(n.$navigate.find("."+c+"-navigate-prev").css("margin-left",-(i/2+84)).show(),n.$navigate.find("."+c+"-navigate-next").css("margin-right",-(i/2+84)))).show():(n.$navigate.find("."+c+"-navigate-prev").hide(),n.$navigate.find("."+c+"-navigate-next").hide()),0===n.group.index&&0===d("."+c+"[data-"+l+'-group="'+n.group.name+'"][data-'+l+"-loop]").length&&!1===n.options.loop&&n.$navigate.find("."+c+"-navigate-prev").hide(),n.group.index+1===n.group.ids.length)&&0===d("."+c+"[data-"+l+'-group="'+n.group.name+'"][data-'+l+"-loop]").length&&!1===n.options.loop&&n.$navigate.find("."+c+"-navigate-next").hide(),!0===n.options.overlay?n.$overlay.appendTo("body"):0<d(n.options.overlay).length&&n.$overlay.appendTo(d(n.options.overlay)),n.options.transitionInOverlay&&n.$overlay.addClass(n.options.transitionInOverlay),e=n.options.transitionIn,""!==(e="object"!=_typeof(t)||void 0===t.transition&&void 0===t.transitionIn?e:t.transition||t.transitionIn)?(n.$element.addClass("transitionIn "+e).show(),n.$wrap.one(y,function(){n.$element.removeClass(e+" transitionIn"),n.$overlay.removeClass(n.options.transitionInOverlay),n.$navigate.removeClass(n.options.transitionInOverlay),a()})):(n.$element.show(),a()),!0!==n.options.pauseOnHover||!0!==n.options.pauseOnHover||!1===n.options.timeout||isNaN(parseInt(n.options.timeout))||!1===n.options.timeout||0===n.options.timeout||(n.$element.off("mouseenter").on("mouseenter",function(t){t.preventDefault(),n.isPaused=!0}),n.$element.off("mouseleave").on("mouseleave",function(t){t.preventDefault(),n.isPaused=!1})),!1===this.options.timeout||isNaN(parseInt(this.options.timeout))||!1===this.options.timeout||0===this.options.timeout||(!0===this.options.timeoutProgressbar?(this.progressBar={hideEta:null,maxHideTime:null,currentTime:(new Date).getTime(),el:this.$element.find("."+c+"-progressbar > div"),updateProgress:function(){var t;n.isPaused||(n.progressBar.currentTime=n.progressBar.currentTime+10,t=(n.progressBar.hideEta-n.progressBar.currentTime)/n.progressBar.maxHideTime*100,n.progressBar.el.width(t+"%"),t<0&&n.close())}},0<this.options.timeout&&(this.progressBar.maxHideTime=parseFloat(this.options.timeout),this.progressBar.hideEta=(new Date).getTime()+this.progressBar.maxHideTime,this.timerTimeout=setInterval(this.progressBar.updateProgress,10))):this.timerTimeout=setTimeout(function(){n.close()},n.options.timeout)),this.options.overlayClose&&!this.$element.hasClass(this.options.transitionOut)&&this.$overlay.click(function(){n.close()}),this.options.focusInput&&this.$element.find(":input:not(button):enabled:visible:first").focus(),!function t(){n.recalcLayout(),n.timer=setTimeout(t,100)}(),n.options.history&&(s=document.title,document.title=s+" - "+n.options.title,document.location.hash=n.id,document.title=s),h.on("keydown."+c,function(t){n.options.closeOnEscape&&27===t.keyCode&&n.close()})}},close:function(t){var e,i=this;function o(){i.state=m,i.$element.trigger(m),!0===i.options.iframe&&i.$element.find("."+c+"-iframe").attr("src",""),(i.options.bodyOverflow||b)&&(d("html").removeClass(c+"-isOverflow"),b)&&d("body").css("overflow","auto"),i.options.onClosed&&"function"==typeof i.options.onClosed&&i.options.onClosed(i),!0===i.options.restoreDefaultContent&&i.$element.find("."+c+"-content").html(i.content),0===d("."+c+":visible").length&&d("html").removeClass(c+"-isAttached"),!0===i.options.removeOnClose&&(i.$element.remove(),i.destroy())}this.state!=f&&this.state!=p||(h.off("keydown."+c),this.state=s,this.$element.trigger(s),this.$element.attr("aria-hidden","true"),clearTimeout(this.timer),clearTimeout(this.timerTimeout),i.options.onClosing&&"function"==typeof i.options.onClosing&&i.options.onClosing(this),e=this.options.transitionOut,""!==(e="object"!=_typeof(t)||void 0===t.transition&&void 0===t.transitionOut?e:t.transition||t.transitionOut)?(this.$element.attr("class",[this.classes,c,e,this.options.theme?c+"--theme-"+this.options.theme:"",!0===this.isFullscreen?"isFullscreen":"",!0===this.isTall?"isTall":"",this.options.rtl?c+"-rtl":""].join(" ")),this.$overlay.attr("class",c+"-overlay "+this.options.transitionOutOverlay),!1!==i.options.navigateArrows&&this.$navigate.attr("class",c+"-navigate "+this.options.transitionOutOverlay),this.$element.one(y,function(){i.$element.hasClass(e)&&i.$element.removeClass(e+" transitionOut").hide(),i.$overlay.removeClass(i.options.transitionOutOverlay).remove(),i.$navigate.removeClass(i.options.transitionOutOverlay).remove(),o()})):(this.$element.hide(),this.$overlay.remove(),this.$navigate.remove(),o()))},next:function(t){var o=this,s="fadeInRight",e="fadeOutLeft",i=d("."+c+":visible"),n={};n.out=this,void 0!==t&&"object"!==_typeof(t)?(t.preventDefault(),i=d(t.currentTarget),s=i.attr("data-"+l+"-transitionIn"),e=i.attr("data-"+l+"-transitionOut")):void 0!==t&&(void 0!==t.transitionIn&&(s=t.transitionIn),void 0!==t.transitionOut)&&(e=t.transitionOut),this.close({transition:e}),setTimeout(function(){for(var t=d("."+c+"[data-"+l+'-group="'+o.group.name+'"][data-'+l+"-loop]").length,e=o.group.index+1;e<=o.group.ids.length;e++){try{n.in=d("#"+o.group.ids[e]).data().uxAside}catch(t){}if(void 0!==n.in){d("#"+o.group.ids[e]).uxAside("open",{transition:s});break}if(e==o.group.ids.length&&0<t||!0===o.options.loop)for(var i=0;i<=o.group.ids.length;i++)if(n.in=d("#"+o.group.ids[i]).data().uxAside,void 0!==n.in){d("#"+o.group.ids[i]).uxAside("open",{transition:s});break}}},200),d(document).trigger(c+"-group-change",n)},prev:function(t){var o=this,s="fadeInLeft",e="fadeOutRight",i=d("."+c+":visible"),n={};n.out=this,void 0!==t&&"object"!==_typeof(t)?(t.preventDefault(),i=d(t.currentTarget),s=i.attr("data-"+l+"-transitionIn"),e=i.attr("data-"+l+"-transitionOut")):void 0!==t&&(void 0!==t.transitionIn&&(s=t.transitionIn),void 0!==t.transitionOut)&&(e=t.transitionOut),this.close({transition:e}),setTimeout(function(){for(var t=d("."+c+"[data-"+l+'-group="'+o.group.name+'"][data-'+l+"-loop]").length,e=o.group.index;0<=e;e--){try{n.in=d("#"+o.group.ids[e-1]).data().uxAside}catch(t){}if(void 0!==n.in){d("#"+o.group.ids[e-1]).uxAside("open",{transition:s});break}if(0===e&&0<t||!0===o.options.loop)for(var i=o.group.ids.length-1;0<=i;i--)if(n.in=d("#"+o.group.ids[i]).data().uxAside,void 0!==n.in){d("#"+o.group.ids[i]).uxAside("open",{transition:s});break}}},200),d(document).trigger(c+"-group-change",n)},destroy:function(){var t=d.Event("destroy");this.$element.trigger(t),h.off("keydown."+c),clearTimeout(this.timer),clearTimeout(this.timerTimeout),!0===this.options.iframe&&this.$element.find("."+c+"-iframe").remove(),this.$element.html(this.$element.find("."+c+"-content").html()),this.$element.off("click","[data-"+l+"-close]"),this.$element.off("click","[data-"+l+"-fullscreen]"),this.$element.off("."+c).removeData(c).attr("style",""),this.$overlay.remove(),this.$navigate.remove(),this.$element.trigger(e),this.$element=null},getState:function(){return this.state},getGroup:function(){return this.group},setWidth:function(t){this.options.width=t,this.recalcWidth();t=this.$element.outerWidth();!0!==this.options.navigateArrows&&"closeToModal"!=this.options.navigateArrows||(this.$navigate.find("."+c+"-navigate-prev").css("margin-left",-(t/2+84)).show(),this.$navigate.find("."+c+"-navigate-next").css("margin-right",-(t/2+84)).show())},setTop:function(t){this.options.top=t,this.recalcVerticalPos(!1)},setBottom:function(t){this.options.bottom=t,this.recalcVerticalPos(!1)},setLeft:function(t){this.options.left=t,this.recalcHorizontalPos(!1)},setRight:function(t){this.options.right=t,this.recalcHorizontalPos(!1)},setHeader:function(t){t?this.$element.find("."+c+"-header").show():(this.headerHeight=0,this.$element.find("."+c+"-header").hide())},setTitle:function(t){this.options.title=t,0===this.headerHeight&&this.createHeader(),0===this.$header.find("."+c+"-header-title").length&&this.$header.append('<h2 class="'+c+'-header-title"></h2>'),this.$header.find("."+c+"-header-title").html(t)},setSubtitle:function(t){""===t?(this.$header.find("."+c+"-header-subtitle").remove(),this.$header.addClass(c+"-noSubtitle")):(0===this.$header.find("."+c+"-header-subtitle").length&&this.$header.append('<p class="'+c+'-header-subtitle"></p>'),this.$header.removeClass(c+"-noSubtitle")),this.$header.find("."+c+"-header-subtitle").html(t),this.options.subtitle=t},setIcon:function(t){0===this.$header.find("."+c+"-header-icon").length&&this.$header.prepend('<i class="'+c+'-header-icon"></i>'),this.$header.find("."+c+"-header-icon").attr("class",c+"-header-icon "+t),this.options.icon=t},setIconText:function(t){this.$header.find("."+c+"-header-icon").html(t),this.options.iconText=t},setHeaderColor:function(t){!0===this.options.borderBottom&&this.$element.css("border-bottom","3px solid "+t),this.$header.css("background",t),this.options.headerColor=t},setZindex:function(t){isNaN(parseInt(this.options.zindex))||(this.options.zindex=t,this.$element.css("z-index",t),this.$navigate.css("z-index",t-1),this.$overlay.css("z-index",t-2))},setFullscreen:function(t){t?(this.isFullscreen=!0,this.$element.addClass("isFullscreen")):(this.isFullscreen=!1,this.$element.removeClass("isFullscreen"))},setTransitionIn:function(t){this.options.transitionIn=t},setTransitionOut:function(t){this.options.transitionOut=t},startLoading:function(t){t=!1!==t,this.$element.find("."+c+"-loader").length||this.$element.append('<div class="'+c+"-loader"+(!0===t?" fadeIn":"")+'"></div>'),this.$element.find("."+c+"-loader").css({top:this.headerHeight,borderRadius:this.options.radius})},stopLoading:function(){var t;this.$element&&this.$element.length&&(t=this.$element.find("."+c+"-loader")).length&&(t.removeClass("fadeIn").addClass("fadeOut"),setTimeout(function(){t.remove()},300))},recalcWidth:function(){var t;this.$element.css("max-width",this.options.width),g()&&(1<(t=this.options.width).toString().split("%").length&&(t=this.$element.outerWidth()),this.$element.css({left:"50%",marginLeft:-t/2}))},recalcVerticalPos:function(t){null!==this.options.top&&!1!==this.options.top?(this.$element.css("margin-top",this.options.top),0===this.options.top&&this.$element.css({borderTopRightRadius:0,borderTopLeftRadius:0})):!1===t&&this.$element.css({marginTop:"",borderRadius:this.options.radius}),null!==this.options.bottom&&!1!==this.options.bottom?(this.$element.css("margin-bottom",this.options.bottom),0===this.options.bottom&&this.$element.css({borderBottomRightRadius:0,borderBottomLeftRadius:0})):!1===t&&this.$element.css({marginBottom:"",borderRadius:this.options.radius})},recalcHorizontalPos:function(t){null!==this.options.left&&!1!==this.options.left?(this.$element.css("margin-left",this.options.left),0===this.options.left&&this.$element.css({borderTopLeftRadius:0,borderBottomLeftRadius:0})):!1===t&&this.$element.css({marginLeft:"",borderRadius:this.options.radius}),null!==this.options.right&&!1!==this.options.right?(this.$element.css("margin-right",this.options.right),0===this.options.right&&this.$element.css({borderTopRightRadius:0,borderBottomRightRadius:0})):!1===t&&this.$element.css({marginRight:"",borderRadius:this.options.radius})},recalcLayout:function(t){var e=this,i=u.height()-e.options.offsets.top-e.options.offsets.bottom,o=this.$element.outerHeight(),s=this.$element.outerWidth(),n=this.$element.find("."+c+"-content")[0].scrollHeight,a=n+this.headerHeight,r=this.$element.innerHeight()-this.headerHeight,h=(parseInt(-(this.$element.innerHeight()+1)/2),this.$wrap.scrollTop()),l=0;g()&&(s>=u.width()||!0===this.isFullscreen?this.$element.css({left:"",marginLeft:""}):this.$element.css({left:"50%",marginLeft:-s/2})),!0===this.options.borderBottom&&""!==this.options.title&&(l=3),this.$element.find("."+c+"-header").length&&this.$element.find("."+c+"-header").is(":visible")?(this.headerHeight=parseInt(this.$element.find("."+c+"-header").innerHeight()),this.$element.css("overflow","hidden")):(this.headerHeight=0,this.$element.css("overflow","")),this.$element.find("."+c+"-loader").length&&this.$element.find("."+c+"-loader").css("top",this.headerHeight),o!==this.modalHeight&&(this.modalHeight=o,this.options.onResize)&&"function"==typeof this.options.onResize&&this.options.onResize(this),this.state!=f&&this.state!=p||(!0===this.options.iframe&&this.recalcIframe(i,o,l,t),o==i?this.$element.addClass("isAttached"):this.$element.removeClass("isAttached"),!1===this.isFullscreen&&this.$element.width()>=u.width()?this.$element.find("."+c+"-button-fullscreen").hide():this.$element.find("."+c+"-button-fullscreen").show(),this.recalcButtons(),(i=!1===this.isFullscreen?i-(v(this.options.top)||0)-(v(this.options.bottom)||0):i)<a?(0<this.options.top&&null===this.options.bottom&&n<i&&this.$element.addClass("isAttachedBottom"),0<this.options.bottom&&null===this.options.top&&n<i&&this.$element.addClass("isAttachedTop"),d("html").addClass(c+"-isAttached"),this.$element.css("height",i)):(this.$element.css("height",n+(this.headerHeight+l)),this.$element.removeClass("isAttachedTop isAttachedBottom"),d("html").removeClass(c+"-isAttached")),r<n&&i<a?(s=o-(e.headerHeight+l),e.hasScroll!==s&&(e.hasScroll=s,e.$element.addClass("hasScroll"),e.$wrap.css("height",s))):e.hasScroll&&(e.hasScroll=!1,e.$element.removeClass("hasScroll"),e.$wrap.css("height","auto")),r+h<n-30?e.$element.addClass("hasShadow"):e.$element.removeClass("hasShadow"))},recalcIframe:function(t,e,i,o){var s=this;!0===this.options.iframeAutosize&&(this.iframeIsVimeo||this.iframeIsYoutube||this.iframeIsLocal)?s.iframeIsVimeo?s.recalcIframeVimeo(t,e,i):s.iframeIsYoutube?s.recalcIframeYoutube(t,e,i):s.recalcIframeLocal(o):t<this.options.iframeHeight+this.headerHeight+i||!0===this.isFullscreen?this.$element.find("."+c+"-iframe").css("height",t-(this.headerHeight+i)):this.$element.find("."+c+"-iframe").css("height",this.options.iframeHeight)},recalcIframeLocal:function(t){var e=this,i=this.$element.find("."+c+"-iframe").contents().find("body");!0===t?(e.startLoading(!1),e.iframeLoad=0,this.options.iframeHeight+=.1):null!==this.options.iframeWatch&&(t=i.find(this.options.iframeWatch)).length&&!t.hasClass("ux-watch")&&(e.startLoading(!1),t.addClass("ux-watch"),e.iframeLoad=0,this.options.iframeHeight+=.1),0===e.iframeLoad&&i.text().length&&(e.iframeLoad=1,i.waitForImages(function(){e.iframeLoad=2})),2!==e.iframeLoad||(t=i.outerHeight())===this.options.iframeHeight||e.iframeSizing||(e.iframeSizing=!0,e.startLoading(!1),this.options.iframeHeight=t,this.$element.find("."+c+"-iframe").attr("scrolling","no").css("height",t),setTimeout(function(){e.iframeSizing=!1,e.stopLoading(),e.$element.find("."+c+"-iframe").removeAttr("scrolling")},800))},recalcIframeVimeo:function(t,e,i){var o,s,n,a=this;0===a.iframeLoad?(a.iframeLoad=1,"undefined"==typeof Vimeo?((s=document.createElement("script")).src="https://player.vimeo.com/api/player.js",s.onload=d.proxy(function(){a.iframeLoad=2},this),(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,o)):a.iframeLoad=2):2===a.iframeLoad?(a.iframeLoad=3,s=this.$element.find("."+c+"-iframe"),a.videoPlayer=player=new Vimeo.Player(s[0])):3===a.iframeLoad?a.videoPlayer.getVideoWidth().then(function(e){a.videoPlayer.getVideoHeight().then(function(t){a.videoWidth=e,a.videoHeight=t,a.iframeLoad=4})}):4===a.iframeLoad?(a.iframeLoad=5,setTimeout(function(){a.stopLoading()},800)):5===a.iframeLoad&&(o=a.wrapper.innerWidth()-30,s=a.wrapper.innerHeight()-(this.headerHeight+i+30),n=i=0,a.videoWidth/a.videoHeight<o/s?n=(i=s)*(a.videoWidth/a.videoHeight):i=(n=o)*(a.videoHeight/a.videoWidth),i!==a.options.iframeHeight)&&(a.setWidth(n),a.options.iframeHeight=i,a.$element.find("."+c+"-iframe").css("height",a.options.iframeHeight))},recalcIframeYoutube:function(t,e,i){var o,s,n,a=this;0===a.iframeLoad?(a.iframeLoad=1,"undefined"==typeof YT?((o=document.createElement("script")).src="https://www.youtube.com/iframe_api",(s=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,s),window.onYouTubeIframeAPIReady=d.proxy(function(){a.iframeLoad=2},this)):a.iframeLoad=2):2===a.iframeLoad?(a.iframeLoad=3,o=this.$element.find("."+c+"-iframe"),a.videoPlayer=new YT.Player(o[0])):3===a.iframeLoad?(s=d(a.videoPlayer.getVideoEmbedCode()),a.videoWidth=s.attr("width"),a.videoHeight=s.attr("height"),a.iframeLoad=4):4===a.iframeLoad?(a.iframeLoad=5,setTimeout(function(){a.stopLoading()},800)):5===a.iframeLoad&&(o=a.wrapper.innerWidth()-30,s=a.wrapper.innerHeight()-(this.headerHeight+i+30),n=i=0,a.videoWidth/a.videoHeight<o/s?n=(i=s)*(a.videoWidth/a.videoHeight):i=(n=o)*(a.videoHeight/a.videoWidth),i!==a.options.iframeHeight)&&(a.setWidth(n),a.options.iframeHeight=i,a.$element.find("."+c+"-iframe").css("height",a.options.iframeHeight))},recalcButtons:function(){var t=this.$header.find("."+c+"-header-buttons").innerWidth()+10;!0===this.options.rtl?this.$header.css("padding-left",t):this.$header.css("padding-right",t)}},u.off("hashchange."+c+" load."+c).on("hashchange."+c+" load."+c,function(t){var o=document.location.hash;if(0===x)if(""!==o){d.each(d("."+c),function(t,e){var i=d(e).uxAside("getState");"opened"!=i&&"opening"!=i||"#"+d(e)[0].id!==o&&d(e).uxAside("close")});try{var e=d(o).data();void 0!==e&&("load"===t.type?!1!==e.uxAside.options.autoOpen&&d(o).uxAside("open"):setTimeout(function(){d(o).uxAside("open")},200))}catch(t){}}else d.each(d("."+c),function(t,e){var i;void 0===d(e).data().uxAside||"opened"!=(i=d(e).uxAside("getState"))&&"opening"!=i||d(e).uxAside("close")});else x=0}),h.off("click","[data-"+l+"-open]").on("click","[data-"+l+"-open]",function(t){t.preventDefault();var e=d("."+c+":visible"),i=d(t.currentTarget).attr("data-"+l+"-open"),o=d(t.currentTarget).attr("data-"+l+"-transitionIn"),t=d(t.currentTarget).attr("data-"+l+"-transitionOut");void 0!==t?e.uxAside("close",{transition:t}):e.uxAside("close"),setTimeout(function(){void 0!==o?d(i).uxAside("open",{transition:o}):d(i).uxAside("open")},200)}),h.off("keyup."+c).on("keyup."+c,function(t){var e,i,o;d("."+c+":visible").length&&(e=d("."+c+":visible")[0].id,i=d("#"+e).uxAside("getGroup"),o=(t=t||window.event).target||t.srcElement,void 0===e||void 0===i.name||t.ctrlKey||t.metaKey||t.altKey||"INPUT"===o.tagName.toUpperCase()||"TEXTAREA"==o.tagName.toUpperCase()||(37===t.keyCode?d("#"+e).uxAside("prev",t):39===t.keyCode&&d("#"+e).uxAside("next",t)))}),h.off("uxAsideResize."+c).on("uxAsideResize."+c,function(t){var e=d("."+c+":visible");e.length&&e.uxAside("recalcLayout",!0)}),d.fn[c]=function(t,e){if(!d(this).length&&"object"==_typeof(t)){var i={$el:document.createElement("div"),id:this.selector.split("#"),class:this.selector.split(".")};if(1<i.id.length){try{i.$el=document.createElement(id[0])}catch(t){}i.$el.id=this.selector.split("#")[1].trim()}else if(1<i.class.length){try{i.$el=document.createElement(i.class[0])}catch(t){}for(var o=1;o<i.class.length;o++)i.$el.classList.add(i.class[o].trim())}document.body.appendChild(i.$el),this.push(d(this.selector))}for(var s=0;s<this.length;s++){var n=d(this[s]),a=n.data(c),r=d.extend({},d.fn[c].defaults,n.data(),"object"==_typeof(t)&&t);if(a||t&&"object"!=_typeof(t)){if("string"==typeof t&&void 0!==a)return a[t].apply(a,[].concat(e))}else n.data(c,a=new $(n,r));r.autoOpen&&(isNaN(parseInt(r.autoOpen))?!0===r.autoOpen&&a.open():setTimeout(function(){a.open()},r.autoOpen),x++)}return this},d.fn[c].defaults={title:"",subtitle:"",headerColor:"#88A0B9",theme:"",appendTo:".body",icon:null,iconText:null,iconColor:"",rtl:!1,width:600,top:null,bottom:null,borderBottom:!0,padding:0,radius:3,zindex:999,iframe:!1,iframeHeight:400,iframeAutosize:!0,iframeURL:null,iframeWatch:null,focusInput:!0,group:"",loop:!1,navigateCaption:!0,navigateArrows:!0,history:!1,restoreDefaultContent:!1,autoOpen:0,removeOnClose:!1,bodyOverflow:!1,fullscreen:!1,openFullscreen:!1,closeOnEscape:!0,closeButton:!0,buttons:"",overlay:!0,overlayClose:!0,overlayColor:"rgba(0, 0, 0, 0.4)",timeout:!1,timeoutProgressbar:!1,pauseOnHover:!1,timeoutProgressbarColor:"rgba(255,255,255,0.5)",contentTransition:!0,transitionIn:"comingIn",transitionOut:"comingOut",transitionInOverlay:"fadeIn",transitionOutOverlay:"fadeOut",offsets:{top:0,right:0,bottom:0,left:0},onFullscreen:function(){},onResize:function(){},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}},d.fn[c].Constructor=$,d.fn.uxAside});